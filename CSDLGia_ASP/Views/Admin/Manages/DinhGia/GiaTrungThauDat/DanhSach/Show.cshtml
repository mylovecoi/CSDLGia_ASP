@model CSDLGia_ASP.Models.Manages.DinhGia.GiaDauGiaDat;
@{
    Layout = "_LayoutReports";
    int record_id = 1;
    var DsDiaBanHuyen = (IEnumerable<DsDiaBan>)ViewData["DsDiaBanHuyen"];
    var DsDiaBanXa = (IEnumerable<DsDiaBan>)ViewData["DsDiaBanXa"];
}
<p style="text-align: center; font-weight: bold; font-size: 30px;">THÔNG TIN HỒ SƠ </p>
<p style="text-align: left; font-size: 16px;">Số quyết định:01</p>
<p style="text-align: left; font-size: 16px;">
    Địa bàn:@ViewData["TenDiaBan"]
</p>
<p style="text-align: left; font-size: 16px;">Thời điểm: @Helpers.ConvertDateToStr(Model.Thoidiem)</p>
<p style="text-align: left; font-size: 16px;">
    Cơ quan tiếp nhận:@ViewData["TenDonVi"]
</p>

<br />
<p style="color: blue; text-decoration-line: underline; font-weight: bold">Thông tin hồ sơ chi tiết</p>
<table cellspacing="0" cellpadding="0" border="1" style="margin: 20px auto; border-collapse: collapse;font:normal 14px Times, serif;" id="data">
    <thead>
        <tr style="text-align:center">
            <th style="text-align:center">STT</th>
            <th style="text-align:center">Số lô</th>
            <th style="text-align:center">Số thửa</th>
            <th style="text-align:center">Tờ bản đồ</th>
            <th style="text-align:center">Mô tả</th>
            <th style="text-align:center">Diện tích</th>
            <th style="text-align:center">Dvt</th>
            <th style="text-align:center">Giá khởi điểm</th>
            <th style="text-align:center">Giá đấu giá</th>
            <th style="text-align:center">
                Giá tính tiền sử dụng đất
            </th>
        </tr>
    </thead>
    <tbody>

        @if (Model != null)
        {
            @if (Model.GiaDauGiaDatCt.Any())
            {
                <tr>
                    <td colspan="12" style="text-align:left; font-weight:bold;">@ViewData["TenTinh"]</td>
                </tr>
                @foreach (var huyen in DsDiaBanHuyen)
                {
                    var dataHuyen = Model.GiaDauGiaDatCt.Where(x => x.MaDiaBanCapHuyen == huyen.MaDiaBan);
                    if (dataHuyen.Any())
                    {
                        <tr>
                            <td colspan="12" style="text-align:left; font-weight:bold;"> &emsp;@huyen.TenDiaBan</td>
                        </tr>
                        @foreach (var xa in DsDiaBanXa)
                        {
                            var dataXa = dataHuyen.Where(x => x.MaDiaBan == xa.MaDiaBan);
                            if (dataXa.Any())
                            {
                                <tr>
                                    <td colspan="12" style="text-align:left; font-weight:bold;"> &emsp;&emsp; @xa.TenDiaBan</td>
                                </tr>
                                @foreach (var item in dataXa)
                                {
                                    <tr>
                                        <td style="text-align:center">@(record_id++)</td>
                                        <td style="text-align:center">@item.Solo</td>
                                        <td style="text-align:center">@item.Sothua</td>
                                        <td style="text-align:center">@item.Tobanbo</td>
                                        <td style="text-align:center">@item.Mota</td>
                                        <td style="text-align:center">@item.Dientich</td>
                                        <td style="text-align:center">@item.Dvt</td>
                                        <td style="text-align:right">@Helpers.ConvertDbToStr(item.Giakhoidiem)</td>
                                        <td style="text-align:right">@Helpers.ConvertDbToStr(item.Giadaugia)</td>
                                        <td style="text-align:right">@Helpers.ConvertDbToStr(item.Giadaugia / item.Dientich)</td>
                                    </tr>
                                }
                            }
                        }
                    }

                }
            }
        }
    </tbody>
</table>