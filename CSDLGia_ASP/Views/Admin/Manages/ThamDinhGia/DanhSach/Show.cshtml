@{
    var record_id = 1;
    int record_hh_id = 1;
    var tdgdv = (IEnumerable<ThamDinhGiaDv>)ViewData["TdgDonvi"];
}
@model CSDLGia_ASP.Models.Manages.ThamDinhGia.ThamDinhGia
@section custom_style {
    <link rel="stylesheet" type="text/css" href="~/Admin/assets/datatables/bootstrap/dataTables.bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="~/Admin/assets/datatables/bootstrap/dataTables.css" />
}

    @section custom_script{
    <script src="~/Admin/assets/js/pages/crud/forms/widgets/jquery-mask.js"></script>
    <script src="~/Admin/assets/js/pages/crud/forms/widgets/select2.js"></script>

    <script type="text/javascript" src="~/Admin/assets/datatables/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="~/Admin/assets/datatables/bootstrap/dataTables.bootstrap.js"></script>
    <script src="~/Admin/assets/datatables/scripts/table-managed.js"></script>
    <script>
        $(document).ready(function () {
            TableManaged.init();
            TableManaged2.init();
            TableManaged4.init();
        });
    </script>
}
    <div class="card card-custom">
        <div class="card-header ribbon ribbon-top ribbon-ver">
            <div class="card-title">
                <h3 class="card-label">
                    Hồ sơ thẩm định giá
                </h3>
            </div>
        </div>
        <div class="card-body">
            <div class="mb-3 font-weight-bold font-size-lg">
                <label style="color: blue; text-decoration-line: underline; font-weight: bold">Thông tin hồ sơ</label>
            </div>
            <div class="row">
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Đơn vị yêu cầu thẩm định*</label>
                        <input type="text" class="form-control" asp-for="Dvyeucau" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Thông tin tờ trình*</label>
                        <input type="text" class="form-control" asp-for="Hosotdgia" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Tên nhóm hàng hóa yêu cầu thẩm định*</label>
                        <input type="text" class="form-control" asp-for="Tttstd" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Thời điểm thẩm định*</label>
                        <input type="date" class="form-control" asp-for="Thoidiem" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Địa điểm thẩm định</label>
                        <input type="text" class="form-control" asp-for="Diadiem" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Số thông báo kết luận*</label>
                        <input type="text" class="form-control" asp-for="Sotbkl" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Số ngày sử dụng kết quả thẩm định</label>
                        <input type="number" class="form-control" asp-for="Songaykq" disabled />
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>Thời hạn sử dụng kết quả thẩm định</label>
                        <input type="date" class="form-control" asp-for="Thoihan" disabled />
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="form-group">
                        <label>Ghi chú</label>
                        <textarea class="form-control" asp-for="Ghichu" cols="12" rows="5" disabled></textarea>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>File đính kèm 1</label>
                        {
                        <a href="~/UpLoad/File/ThamDinhGia/@Model.Ipf1" target="_blank"
                       onclick="window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
                            @Model.Ipf1
                        </a>
                        }
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>File đính kèm 2</label>
                        {
                        <a href="~/UpLoad/File/ThamDinhGia/@Model.Ipf2" target="_blank"
                       onclick="window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
                            @Model.Ipf2
                        </a>
                        }
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>File đính kèm 3</label>
                        {
                        <a href="~/UpLoad/File/ThamDinhGia/@Model.Ipf3" target="_blank"
                       onclick="window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
                            @Model.Ipf3
                        </a>
                        }
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="form-group">
                        <label>File đính kèm 4</label>
                        {
                        <a href="~/UpLoad/File/ThamDinhGia/@Model.Ipf4" target="_blank"
                       onclick="window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
                            @Model.Ipf4
                        </a>
                        }
                    </div>
                </div>
            </div>

            <div class="mb-3 font-weight-bold font-size-lg">
                <label style="color: blue; text-decoration-line: underline; font-weight: bold">Thông tin hồ sơ chi tiết</label>
            </div>
            <div class="card card-custom" style="border: 1px solid #60aee4;">
                <div class="card-body" id="frm_data">
                    <table class="table table-striped table-bordered table-hover" id="datatable_4">
                        <thead>
                            <tr style="text-align:center">
                                <th width="2%">#</th>
                                <th>Mã hàng hóa</th>
                                <th>Tên hàng hóa-Quy cách</th>
                                <th>Thông số kỹ thuật</th>
                                <th>Xuất xứ</th>
                                <th>Đơn vị tính</th>
                                <th>Số lượng</th>
                                <th>Đơn giá đề nghị</th>
                                <th>Giá trị đề nghị</th>
                                <th>Đơn giá thẩm định</th>
                                <th>Giá trị thẩm định</th>
                            </tr>
                        </thead>
                        <tbody>
                        @if (Model != null)
                        {
                            @if (Model.ThamDinhGiaCt != null)
                            {
                                @foreach (var item in Model.ThamDinhGiaCt)
                                {
                                    <tr>
                                        <td style="text-align:center">@(record_hh_id++)</td>
                                        <td style="text-align:center">@item.Mats</td>
                                        <td class="active">@item.Tents</td>
                                        <td>@item.Thongsokt</td>
                                        <td>@item.Nguongoc</td>
                                        <td style="text-align:center">@item.Dvt</td>
                                        <td style="text-align:center">@item.Sl</td>
                                        <td style="text-align:right; font-weight: bold">@Helpers.ConvertDbToStr(item.Nguyengiadenghi)</td>
                                        <td style="text-align:right; font-weight: bold">@Helpers.ConvertDbToStr(item.Giadenghi)</td>
                                        <td style="text-align:right; font-weight: bold">@Helpers.ConvertDbToStr(item.Nguyengiathamdinh)</td>
                                        <td style="text-align:right; font-weight: bold">@Helpers.ConvertDbToStr(item.Giatritstd)</td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>
                </table>
                <!--end: Datatable-->
            </div>
        </div>

        </div>
        <div class="card-footer" style="text-align:center">
            <a asp-controller="ThamDinhGia" asp-action="Index" asp-route-Nam="@Model.Thoidiem.Year" asp-route-Madv="@Model.Madv" class="btn btn-danger">
                <i class="la la-reply"></i>Quay lại
            </a>&ensp;
        </div>
    </div>

    <!--Tdgdv Modal-->
    <div class="modal fade" id="Dvyc_Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="card-label">
                        Thông tin đơn vị thẩm định giá
                    </h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i aria-hidden="true" class="ki ki-close"></i>
                    </button>
                </div>
                <hr />
                <div class="modal-body">
                    <table class="table table-striped table-bordered table-hover" id="sample_3">
                        <thead>
                            <tr style="text-align:center">
                                <th width="4%">#</th>
                                <th>Tên đơn vị</th>
                                <th>Người đại điện</th>
                                <th>Địa chỉ</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                        @if (tdgdv != null)
                        {
                            @foreach (var item in tdgdv)
                            {
                                <tr>
                                    <td style="text-align: center">@(record_id++)</td>
                                    <td class="active">@item.Tendv</td>
                                    <td>@item.Nguoidaidien</td>
                                    <td>@item.Diachi</td>
                                    <td style="text-align: center">
                                        <button class="btn btn-sm btn-clean btn-icon" title="Chọn" onclick="adddonvi('@item.Tendv')">
                                            <i class="icon-lg la la-check text-primary"></i>
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-danger font-weight-bold" data-dismiss="modal">Hủy</button>
            </div>
        </div>
    </div>
</div>
@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    }